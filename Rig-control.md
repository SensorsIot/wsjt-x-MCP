# Multi-Slice FlexRadio Rig Control – Complete FSD (Flex SmartSDR Slice A–F)

This markdown package contains:

1. **A full FSD revision** (Flex SmartSDR Slice A–F backend, no TS-2000/COM ports).  
2. **Four ready-to-use WSJT-X configuration `.ini` templates** (for slices A–D).  
3. **A full ASCII diagram** showing Flex CAT TCP + WSJT-X instances + MCP orchestration.  
4. Fully self-contained document.

---

# 1. FSD – Rig Control Using Flex SmartSDR Slice A–F (Modern TCP CAT)

## 1.1 Scope

This FSD describes the *rig control portion* of a multi-slice FT8/FT4 environment using:

- **FlexRadio SmartSDR**  
- **SmartSDR CAT TCP ports**  
- **WSJT-X built-in rig: “FlexRadio SmartSDR Slice A–F”**  
- **One WSJT-X instance per slice**  
- **An MCP Rig Controller** using the *native SmartSDR API* for:
  - slice creation  
  - slice mode/frequency  
  - DAX channel assignment  
  - TX slice control  

No COM ports.  
No TS?2000 emulation.  
WSJT-X runs in native Flex slice mode.

---

## 1.2 Architecture Overview

```
                       ????????????????????????????
                       ?        FlexRadio         ?
                       ? SmartSDR + SmartSDR CAT  ?
                       ????????????????????????????
                                   ?
                SmartSDR TCP API   ?     SmartSDR CAT TCP Ports
                                   ?
                ??????????????????????????????????
                ?         MCP Rig Controller     ?
                ?  (native Flex slice manager)   ?
                ??????????????????????????????????
                            ?          ?
                            ?          ?  CAT TCP (Flex Slice A–F)
                            ?          ?
           ??????????????????   ?????????????????
           ?                    ?               ?
    WSJT-X Instance A     WSJT-X Instance B   WSJT-X Instance C   WSJT-X Instance D
    Rig: Slice A          Rig: Slice B        Rig: Slice C        Rig: Slice D
    CAT: localhost:60001  CAT: localhost:60002 CAT:60003          CAT:60004
```

---

## 1.3 Slice Mapping

| Slice | Index | WSJT-X Rig   | CAT TCP Port | DAX RX |
| ----: | ----- | ------------ | ------------ | ------ |
|     A | 0     | Flex Slice A | 60001        | 1      |
|     B | 1     | Flex Slice B | 60002        | 2      |
|     C | 2     | Flex Slice C | 60003        | 3      |
|     D | 3     | Flex Slice D | 60004        | 4      |

Operator manually creates CAT TCP ports in SmartSDR CAT pointing to slices 0–3.

---

## 1.4 MCP Rig Controller Responsibilities

### ? Uses the *SmartSDR TCP API*  

Responsible for:

- Discover slices  
- Create missing slices  
- Tune frequency  
- Set mode (DIGU for FT8/FT4)  
- Assign DAX RX channels  
- Select TX slice  
- Apply TX safety (RF off, inhibit, emergency stop)

### ? NOT Responsible for

- CAT or TS?2000 handling  
- Talking directly to WSJT-X (another module handles UDP for decodes/QSO events)  
- Virtual COM ports

---

## 1.5 MCP Tools

### Tool: `rig_get_state()`

Returns slice listing and radio summary.

### Tool: `rig_configure_slice(slice_index, freq_hz, mode, dax_rx_channel, make_tx)`

Ensures a slice exists and matches desired parameters.

### Tool: `rig_tune_slice(slice_index, freq_hz)`

Adjust dial frequency only.

### Tool: `rig_set_slice_mode(slice_index, mode)`

Sets mode (DIGU).

### Tool: `rig_set_tx_slice(slice_index)`

Designates TX slice.

### Tool: `rig_emergency_stop()`

CUT TX immediately (sets RF power to 0 or uses TX inhibit).

---

# 2. Four Ready-to-Use WSJT-X INI Files  

These files assume:

- SmartSDR CAT TCP ports: **60001–60004**
- DAX: RX 1–4 and TX
- UDP ports: 2237–2240

Place files in:  
`%LOCALAPPDATA%\WSJT-X\` (Windows)

Name each per your startup flags:

- `WSJT-X - SliceA.ini`
- `WSJT-X - SliceB.ini`
- `WSJT-X - SliceC.ini`
- `WSJT-X - SliceD.ini`

---

## 2.1 WSJT-X Slice A — `WSJT-X - SliceA.ini`

```
[Configuration]
Rig=1
HamlibRig=1035                  ; FlexRadio SmartSDR Slice A
CATPort=localhost:60001
PTTMethod=CAT
Mode=Data/Pkt
SplitOperation=Rig
UDPServerPort=2237

SoundInDevice="DAX Audio RX 1"
SoundOutDevice="DAX Audio TX"
```

---

## 2.2 WSJT-X Slice B — `WSJT-X - SliceB.ini`

```
[Configuration]
Rig=1
HamlibRig=1036                  ; FlexRadio SmartSDR Slice B
CATPort=localhost:60002
PTTMethod=CAT
Mode=Data/Pkt
SplitOperation=Rig
UDPServerPort=2238

SoundInDevice="DAX Audio RX 2"
SoundOutDevice="DAX Audio TX"
```

---

## 2.3 WSJT-X Slice C — `WSJT-X - SliceC.ini`

```
[Configuration]
Rig=1
HamlibRig=1037                  ; FlexRadio SmartSDR Slice C
CATPort=localhost:60003
PTTMethod=CAT
Mode=Data/Pkt
SplitOperation=Rig
UDPServerPort=2239

SoundInDevice="DAX Audio RX 3"
SoundOutDevice="DAX Audio TX"
```

---

## 2.4 WSJT-X Slice D — `WSJT-X - SliceD.ini`

```
[Configuration]
Rig=1
HamlibRig=1038                  ; FlexRadio SmartSDR Slice D
CATPort=localhost:60004
PTTMethod=CAT
Mode=Data/Pkt
SplitOperation=Rig
UDPServerPort=2240

SoundInDevice="DAX Audio RX 4"
SoundOutDevice="DAX Audio TX"
```

---

# 3. Full ASCII Diagram  

(Shows control, audio, CAT TCP, and SmartSDR API flow)

```
 ????????????????????????????????????????????????????????????
 ?                        FlexRadio                         ?
 ?    SmartSDR GUI   |   SmartSDR CAT   |   SmartSDR API    ?
 ?????????????????????????????????????????????????????????????
             ?                  ?                   ?
             ?                  ? CAT TCP           ? Native API
             ?                  ? (Flex Slice A–D)  ? (Slices/DAX)
             ?                  ?                   ?
 ??????????????????????????  ????????  ??????????????????????????
 ? WSJT-X Instance A       ?  ? ... ?  ?  MCP Rig Controller     ?
 ? Rig: Flex Slice A       ?  ?     ?  ? (Creates/Tunes Slices)  ?
 ? CAT: localhost:60001    ?  ?     ?  ? (Assigns DAX)           ?
 ???????????????????????????  ?     ?  ? (TX safety, state)      ?
             ? CAT TCP        ?     ?  ???????????????????????????
             ?                ?     ?
 ??????????????????????????  ?     ?
 ? WSJT-X Instance B       ?  ?     ?
 ? Rig: Flex Slice B       ?  ?     ?
 ? CAT: localhost:60002    ?  ?     ?
 ???????????????????????????  ?     ?
             ? CAT TCP        ?     ?
             ?                ?     ?
 ??????????????????????????  ?     ?
 ? WSJT-X Instance C       ?  ?     ?
 ? Rig: Flex Slice C       ?  ?     ?
 ? CAT: localhost:60003    ?  ?     ?
 ???????????????????????????  ?     ?
             ? CAT TCP        ?     ?
             ?                ?     ?
 ??????????????????????????  ?     ?
 ? WSJT-X Instance D       ?  ?     ?
 ? Rig: Flex Slice D       ?  ?     ?
 ? CAT: localhost:60004    ?  ?     ?
 ???????????????????????????  ???????
```

---

# End of Document